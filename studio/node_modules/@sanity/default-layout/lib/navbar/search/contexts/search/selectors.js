"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getSelectableTypes = getSelectableTypes;
exports.hasSearchableTerms = hasSearchableTerms;
exports.sortTypes = sortTypes;

var _internal = require("@sanity/base/_internal");

/**
 * Returns a list of all available document types filtered by a search string.
 * Types containing the search string in its `title` or `name` will be returned.
 */
function getSelectableTypes(schema, typeFilter) {
  return (0, _internal.getSearchableTypes)(schema).filter(type => inTypeFilter(type, typeFilter)).sort(sortTypes);
}

function hasSearchableTerms(terms) {
  return terms.query.trim() !== '' || !!terms.types.length;
}

function sortTypes(a, b) {
  var _a$title, _b$title;

  return ((_a$title = a.title) !== null && _a$title !== void 0 ? _a$title : a.name).localeCompare((_b$title = b.title) !== null && _b$title !== void 0 ? _b$title : b.name);
}

function inTypeFilter(type, typeFilter) {
  var _type$title;

  return !typeFilter || ((_type$title = type.title) !== null && _type$title !== void 0 ? _type$title : type.name).toLowerCase().includes(typeFilter === null || typeFilter === void 0 ? void 0 : typeFilter.toLowerCase());
}